!function(e,t,n){function a(){var e=!1;return(t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.0"))&&(e=!0),e}function i(e){e.preventDefault()}function l(){n("#lockAt_value").val(n('input[id$="_lockAt"]')[0].value+" "+n('input[id$="_lockAt"]')[1].value)}function o(e,t){this.group=e,this.user=t}function c(e){var t=n(this).parents("tr"),a=t.find(".group-user").val(),i=t.find(".group-id").val(),l=e.data.param1,o=-1;n.each(u,function(e){this.group===i&&this.user===a&&(o=e)}),u.splice(o,1),t.remove(),l.select2("open")?l.select2("close"):(l.select2("close"),l.select2("open"))}n('input[id$="_display"]').on("autocompletefocus",function(e){i(e)}),n('input[id$="_display"]').on("autocompleteselect",function(e,t){i(e),n(this).val(t.item.label),n(this).nextAll("input").val(t.item.value)}),n("#appointment_teacher").on("autocompleteselect",function(e,t){i(e),n(this).val(t.item.label),n(this).nextAll("input").val(t.item.value),n.get("index.php/?r=appointment/getteacherappointmentsajax",{teacherId:t.item.value,classname:"Appointment"},function(e){n("#appointment_dateAndTime_select").html(e),n("#appointment_dateAndTime_select").children("select").select2()},"json")}),n("#appointmentBlock_teacher").on("autocompleteselect",function(e,t){i(e),n(this).val(t.item.label),n(this).nextAll("input").val(t.item.value),n.get("index.php/?r=appointment/getteacherappointmentsajax",{teacherId:t.item.value,classname:"BlockedAppointment"},function(e){n("#appointment_dateAndTime_select").html(e),n("#appointment_dateAndTime_select").children("select").select2()},"json")}),n('input[id$="_teacher"]').on("autocompletefocus",function(e){i(e)}),n("#appointment_parent").on("autocompleteselect",function(e,t){i(e),n(this).val(t.item.label),n.get("index.php/?r=appointment/getselectchildrenajax",{id:t.item.value},function(e){n("#appointment_parent_select").html(e),n("#appointment_parent_select").children("select").select2()},"json")}),n("#appointment_parent").on("autocompletefocus",function(e){i(e)}),n("#red-button").on("click",function(t){i(t),$answer=confirm("Alles l√∂schen?"),$answer&&(e.location.href="index.php?r=user/deleteAll")}),n('input[id$="_lockAt"]').on({change:function(){l()},keyup:function(){l()}}),n('input[id$="_dateFormat"], input[id$="_timeFormat"]').on("keyup",function(){n("#ConfigForm_dateTimeFormat").val(n('input[id$="_dateFormat"]').val()+" "+n('input[id$="_timeFormat"]').val())}),n('select[id$="_allowBlockingAppointments"], select[id$="_banUsers"], select[id$="_mailsActivated"]').on("change",function(e){$switch="0"===e.target.value?!0:!1,n(e.target).parents("fieldset").children(".row:gt(0)").children(".four").children("input, select").attr("disabled",$switch)}),n('select[id$="_randomTeacherPassword"]').on("change",function(e){$switch="0"===e.target.value?!1:!0,n('input[id$="_defaultTeacherPassword"]').attr("disabled",$switch)}),n(".infolabel").each(function(){n(this).html(n(this).html()+'&nbsp;&nbsp;<span data-icon="&#xe012;"/>')}),n(".infofeld").on({mouseenter:function(){n(".infobox").show(),n(".infobox").children("p").html(n(this).siblings(".infotext").html()),n(".infobox").css("left",n(t).width()/2-200),n(".infobox").css("top",n(e).height()/4)},mouseleave:function(){var e=n(event.toElement),t=n(".infobox").get(0);t===e.get(0)||n.contains(t,e)?n(t).one("mouseleave",function(){n(t).fadeOut("fast")}):n(t).fadeOut("fast")}}),n(t).ready(function(){""!==n("#lockAt_value").val()&&"string"==typeof n("#lockAt_value").val()&&($value=n("#lockAt_value").val(),$arr=$value.split(" "),n("#date_lockAt").val($arr[0]),n("#time_lockAt").val($arr[1])),a()&&(n(".view").children().each(function(){n(this).attr("src",path+"/img/search.svg")}),n(".update").children().each(function(){n(this).attr("src",path+"/img/pencil.svg")}),n(".delete").children().each(function(){n(this).attr("src",path+"/img/remove.svg")}))}),n("#User_role").on("change",function(e){e.val>1?n("#groups-select").select2("enable",!0):(n("#groups-select").select2("enable",!1),n("#groups-select").select2("val",""))});var s=0;n(".add-child-tan").on("click",function(){s++,$div=n(".customChild:first").clone(),n($div).children().each(function(){$input=n(this).find("input"),$select=!1,$input.hasClass("select2-focusser")&&($input=n(this).find("select"),$select=!0),0!==$input.length&&(n($input).attr("name",n($input).attr("name").replace(/\d/,s)),n($input).attr("id",n($input).attr("id").replace(/\d/,s)),n($input).val("")),$select&&(n($input).attr("tabindex",""),n($input).attr("class",""),n(this).children(".nine").html($input))}),n(".customChild:last").after(n($div)),n($div).find("select").select2()}),n("#print-view-teacher").on("autocompleteselect",function(e,t){e.preventDefault(),n(this).val(t.item.label),n(this).data("id",t.item.value)}),n("#print-view-button").click(function(){var t=n("#print-view-date").val(),a=n("#print-view-teacher").data("id");""!==t&&"string"==typeof t&&""!==a&&"string"==typeof a&&(e.location.href="index.php?r=appointment/overview&id="+a+"&date="+t)});var u=[],r=0;n.each(n("#date-form table #input-target").children(),function(){var e=n(this).find(".group-user").val(),t=n(this).find(".group-id").val(),a=new o(t,e);u.push(a),r++}),n("#group-users").on("select2-selecting",function(e){var t=n("#groups"),a=t.val(),i=new o(a,e.val),l=!1;if(n.each(u,function(){this.group===i.group&&this.user===i.user&&(l=!0)}),!l){var s=n(this),p=n("<td/>").text(n(this).find("option[value="+e.val+"]").text()),d=n("<td/>").text(t.select2("data").text),f=n("#input-template"),m=f.find(".group-user").clone().attr("name","user["+r+"]").val(i.user),h=f.find(".group-id").clone().attr("name","group["+r+"]").val(i.group),v=f.find(".group-delete").clone().attr("name","group["+r+"]"),g=f.find("i").clone().click({param1:s},c);p.append(m),d.append(h).append(v),n("<tr/>").append(p).append(d).append(n("<td/>",{"class":"text-center"}).append(g)).appendTo(n("#input-target")),u.push(i),r++}event.preventDefault(),e.preventDefault(),s.select2("close"),s.select2("open")}),n("#close-user-select").on("click",function(){n("#group-users").select2("close")}),n(".flag-relation-for-delete").click(function(){var e=n(this).parents("tr");e.find(".group-delete").click(),e.toggleClass("delete-assign")})}(this,document,jQuery);