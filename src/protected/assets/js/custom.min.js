!function(t,e,i){function s(){var t=!1;return(e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.0"))&&(t=!0),t}function n(t){t.preventDefault()}function o(){i("#lockAt_value").val(i('input[id$="_lockAt"]')[0].value+" "+i('input[id$="_lockAt"]')[1].value)}function a(t,e){this.group=t,this.user=e}i('input[id$="_display"]').on("autocompletefocus",function(t){n(t)}),i('input[id$="_display"]').on("autocompleteselect",function(t,e){n(t),i(this).val(e.item.label),i(this).nextAll("input").val(e.item.value)}),i("#appointment_teacher").on("autocompleteselect",function(t,e){n(t),i(this).val(e.item.label),i(this).nextAll("input").val(e.item.value),i.get("index.php/?r=appointment/getteacherappointmentsajax",{teacherId:e.item.value,classname:"Appointment"},function(t){i("#appointment_dateAndTime_select").html(t),i("#appointment_dateAndTime_select").children("select").select2()},"json")}),i("#appointmentBlock_teacher").on("autocompleteselect",function(t,e){n(t),i(this).val(e.item.label),i(this).nextAll("input").val(e.item.value),i.get("index.php/?r=appointment/getteacherappointmentsajax",{teacherId:e.item.value,classname:"BlockedAppointment"},function(t){i("#appointment_dateAndTime_select").html(t),i("#appointment_dateAndTime_select").children("select").select2()},"json")}),i('input[id$="_teacher"]').on("autocompletefocus",function(t){n(t)}),i("#appointment_parent").on("autocompleteselect",function(t,e){n(t),i(this).val(e.item.label),i.get("index.php/?r=appointment/getselectchildrenajax",{id:e.item.value},function(t){i("#appointment_parent_select").html(t),i("#appointment_parent_select").children("select").select2()},"json")}),i("#appointment_parent").on("autocompletefocus",function(t){n(t)}),i("#red-button").on("click",function(e){n(e),$answer=confirm("Alles l√∂schen?"),$answer&&(t.location.href="index.php?r=user/deleteAll")}),i('input[id$="_lockAt"]').on({change:function(){o()},keyup:function(){o()}}),i('input[id$="_dateFormat"], input[id$="_timeFormat"]').on("keyup",function(){i("#ConfigForm_dateTimeFormat").val(i('input[id$="_dateFormat"]').val()+" "+i('input[id$="_timeFormat"]').val())}),i('select[id$="_allowBlockingAppointments"], select[id$="_banUsers"], select[id$="_mailsActivated"]').on("change",function(t){$switch="0"===t.target.value?!0:!1,i(t.target).parents("fieldset").children(".row:gt(0)").children(".four").children("input, select").attr("disabled",$switch)}),i('select[id$="_randomTeacherPassword"]').on("change",function(t){$switch="0"===t.target.value?!1:!0,i('input[id$="_defaultTeacherPassword"]').attr("disabled",$switch)}),i(".infolabel").each(function(){i(this).html(i(this).html()+'&nbsp;&nbsp;<span data-icon="&#xe012;"/>')}),i(".infofeld").on({mouseenter:function(){i(".infobox").show(),i(".infobox").children("p").html(i(this).siblings(".infotext").html()),i(".infobox").css("left",i(e).width()/2-200),i(".infobox").css("top",i(t).height()/4)},mouseleave:function(){var t=i(event.toElement),e=i(".infobox").get(0);e===t.get(0)||i.contains(e,t)?i(e).one("mouseleave",function(){i(e).fadeOut("fast")}):i(e).fadeOut("fast")}}),i(e).ready(function(){""!==i("#lockAt_value").val()&&"string"==typeof i("#lockAt_value").val()&&($value=i("#lockAt_value").val(),$arr=$value.split(" "),i("#date_lockAt").val($arr[0]),i("#time_lockAt").val($arr[1])),s()&&(i(".view").children().each(function(){i(this).attr("src",path+"/img/search.svg")}),i(".update").children().each(function(){i(this).attr("src",path+"/img/pencil.svg")}),i(".delete").children().each(function(){i(this).attr("src",path+"/img/remove.svg")}))}),i("#User_role").on("change",function(t){t.val>1?i("#groups-select").select2("enable",!0):(i("#groups-select").select2("enable",!1),i("#groups-select").select2("val",""))});var r=0;i(".add-child-tan").on("click",function(){r++,$div=i(".customChild:first").clone(),i($div).children().each(function(){$input=i(this).find("input"),$select=!1,$input.hasClass("select2-focusser")&&($input=i(this).find("select"),$select=!0),0!==$input.length&&(i($input).attr("name",i($input).attr("name").replace(/\d/,r)),i($input).attr("id",i($input).attr("id").replace(/\d/,r)),i($input).val("")),$select&&(i($input).attr("tabindex",""),i($input).attr("class",""),i(this).children(".nine").html($input))}),i(".customChild:last").after(i($div)),i($div).find("select").select2()}),i("#print-view-teacher").on("autocompleteselect",function(t,e){t.preventDefault(),i(this).val(e.item.label),i(this).data("id",e.item.value)}),i("#print-view-button").click(function(){var e=i("#print-view-date").val(),s=i("#print-view-teacher").data("id");""!==e&&"string"==typeof e&&""!==s&&"string"==typeof s&&(t.location.href="index.php?r=appointment/overview&id="+s+"&date="+e)});var l=[];i("#group-users").on("select2-selecting",function(t){var e=i("#groups"),s=e.val(),n=new a(t.val,s),o=!1;if(i.each(l,function(){this.group===n.group&&this.user===n.user&&(o=!0)}),!o){var r=i("<tr/>"),h=i("<td/>"),c=i("<td/>"),u=i("#input-template"),d=u.find(".group-user").clone(),p=u.find(".group-id").clone(),f=i("#input-target"),m=f.children().size;d.attr("name","user["+m+"]"),p.attr("name","group["+m+"]"),d.val(n.user),p.val(n.group),h.text(i(this).find("option[value="+t.val+"]").text()),c.text(e.select2("data").text),h.append(d),c.append(p),r.append(h).append(c).appendTo(f),l.push(n)}event.preventDefault(),t.preventDefault(),i(this).select2("close"),i(this).select2("open")})}(this,document,jQuery);